<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SHΔDØW EMPIRE | V4 FIXED</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Rajdhani:wght@500;700&display=swap');
        :root { --neon: #00f3ff; }
        body { background: #000; color: #fff; overflow: hidden; font-family: 'Rajdhani', sans-serif; margin: 0; }
        .app-container { height: 100vh; overflow-y: scroll; scroll-snap-type: y mandatory; scrollbar-width: none; }
        .app-container::-webkit-scrollbar { display: none; }
        .video-card { height: 100vh; width: 100vw; scroll-snap-align: start; position: relative; overflow: hidden; background: #000; }
        video { width: 100%; height: 100%; object-fit: cover; filter: brightness(0.6) contrast(1.1); }
        .hud-ui { position: absolute; inset: 20px; border: 1px solid rgba(0, 243, 255, 0.1); pointer-events: none; z-index: 10; border-radius: 15px; }
        .big-title { font-family: 'Orbitron'; font-weight: 900; font-size: 12vw; line-height: 0.8; text-transform: uppercase; background: linear-gradient(to bottom, #fff, var(--neon)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        #loader { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: 0.8s; }
    </style>
</head>
<body>

    <div id="loader">
        <div class="text-cyan-400 font-black tracking-widest animate-pulse mb-4" style="font-family:'Orbitron'">ESTABLISHING_CONNECTION...</div>
        <div class="w-48 h-[1px] bg-white/10 overflow-hidden"><div class="h-full bg-cyan-400 animate-[loading_2s_infinite]"></div></div>
    </div>

    <main class="app-container" id="main-engine"></main>

    <script>
        // البيانات المستخرجة من رابطك
        const cloudName = "dssk5tabb"; 
        const totalVideos = 5; // عدد فيديوهاتك الحالية
        const engine = document.getElementById('main-engine');

        // بناء المحتوى يدوياً لضمان الفتح الفوري
        for (let i = 1; i <= totalVideos; i++) {
            const videoID = `homework${i}`; 
            const section = document.createElement('section');
            section.className = 'video-card';
            section.innerHTML = `
                <div class="hud-ui"></div>
                <video loop playsinline muted src="https://res.cloudinary.com/${cloudName}/video/upload/q_auto,f_auto/${videoID}.mp4"></video>
                <div class="absolute bottom-20 left-10 z-[100] pointer-events-none">
                    <div class="text-cyan-400 text-[10px] tracking-[5px] mb-2 font-bold">NODE: ${videoID.toUpperCase()}</div>
                    <h2 class="big-title">ARCHIVE<br>STREΔM</h2>
                </div>
            `;
            engine.appendChild(section);
        }

        // إخفاء التحميل فوراً لأننا لا ننتظر قائمة الـ JSON
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loader').style.opacity = '0';
                setTimeout(() => document.getElementById('loader').style.display = 'none', 800);
            }, 1000);
        });

        // محرك التشغيل عند التمرير
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(e => {
                const v = e.target.querySelector('video');
                if (e.isIntersecting) v.play();
                else { v.pause(); v.currentTime = 0; }
            });
        }, { threshold: 0.6 });

        document.querySelectorAll('.video-card').forEach(c => observer.observe(c));

        // تفعيل الصوت
        window.onclick = () => { document.querySelectorAll('video').forEach(v => v.muted = false); };
    </script>

    <style>@keyframes loading { 0% { left: -100%; width: 30%; } 100% { left: 100%; width: 30%; } }</style>
</body>
</html>
